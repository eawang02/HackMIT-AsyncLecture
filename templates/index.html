{% extends "layout.html" %}

{% block title %}
    Videos
{% endblock %}

{% block main %}
    <div id="container">
        <div class = "More Lectures" id="left-column">
            <h5>&nbsp;</h5>
            <h6>&nbsp;</h6>
            <h3 id="more_lecs">More Lectures</h3>
            <div class="card border-primary mb-3" style="max-width: 20rem;">
                <div class="card-header">Lecture 2</div>
                <div class="card-body">
                  <h4 class="card-title">Finding Waldo</h4>
                  <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
            </div>
        </div>
        <div id="middle-column">
            <h1 id = "title">Lecture 1: Chains of Habit</h1>
            <iframe src="https://player.vimeo.com/video/747752214" width="800" height="472.5" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
            <!-- <button onclick="player.getCurrentTime().then(function(seconds) {console.log('Current time:', seconds);});">Click me</button>
            <p id="demo"></p> -->
      
            <script src="https://player.vimeo.com/api/player.js"></script>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
            <script>
                var iframe = document.querySelector('iframe');
                var player = new Vimeo.Player(iframe);
                const buttonA = document.querySelector('question')
      
                player.on('play', function() {
                console.log('Played the video');

                question.onclick = () => {
                let time = player.getCurrentTime().then(time => 
                    {
                    //console.log(time);
                    const question = ""
                    const dict = {time, question}
                    const s = JSON.stringify(dict) // In the actual application, store the question content as well
                    console.log(s)
                    $.ajax({
                        url:"/test",
                        type:"POST",
                        contentType: "application/json",
                        data: JSON.stringify(s)});
                    }
                    )
                //time.then(time => console.log(time))
            }
              });
      
            </script> 

    </div>
    <div class = "previous question" id="right-column">
        <h5>&nbsp;</h5>
        <h5>&nbsp;</h5>
        <h3 id="prev_qs">Previous Questions</h3>
        <div class="card text-white bg-primary mb-3" style="max-width: 20rem;">
            <div class="card-header">Question 1</div>
            <div class="card-body">
              <h4 class="card-title">Who are you?</h4>
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            </div>
          </div>
    </div>

    </div>

    <div id="bottom">
        <h3>Questions</h3>
        <div class="form-group" id="qs_box">
            <label for="exampleTextarea" class="form-label mt-4">Example textarea</label>
            <textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
          </div>
        <div id="qs_btn">
            <button class="btn btn-primary btn-xs my-2 my-sm-0" type="submit">Post A Question</button>
        </div>
    </div>
{% endblock %}
